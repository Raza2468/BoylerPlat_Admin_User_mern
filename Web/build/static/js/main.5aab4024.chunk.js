(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{100:function(e,t,c){},101:function(e,t,c){},162:function(e,t){},163:function(e,t){},170:function(e,t){},172:function(e,t){},206:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),r=c(20),s=c.n(r),l=(c(100),c(101),c(3));var o=function(){return Object(l.jsx)("div",{children:Object(l.jsx)("h1",{children:"Home"})})},i=c(62),j=c.n(i),u=c(48),d=c(90),b=c(26),h=c(12),O=c(214),x=c(11),m=c(18),p=c.n(m),f=(c(133),function(){var e="http://localhost:3001",t=Object(n.useRef)(),c=Object(n.useRef)(),a=Object(n.useRef)(),r=Object(n.useRef)(),s=Object(n.useState)(""),o=Object(b.a)(s,2),i=o[0],m=o[1],f=Object(n.useState)(""),g=Object(b.a)(f,2),v=g[0],y=g[1],w=Object(n.useState)(!1),S=Object(b.a)(w,2),N=S[0],k=S[1],L=Object(n.useState)(""),E=Object(b.a)(L,2),F=E[0],C=E[1],V=Object(n.useState)(""),D=Object(b.a)(V,2),P=D[0],I=D[1];function R(){return(R=Object(d.a)(j.a.mark((function n(){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log(c.current.state.innerValue),""!==c.current.state.innerValue){n.next=5;break}return n.abrupt("return",m("email not found"));case 5:if(a.current.state.innerValue===r.current.state.innerValue){n.next=7;break}return n.abrupt("return",m("Password do not match"));case 7:try{y("Sign up succes full"),k(!0),p()({method:"post",url:e+"/auth/signup",data:{name:t.current.state.innerValue,email:c.current.state.innerValue,password:a.current.state.innerValue}}).then((function(e){e.data.status,alert(e.data.message)})).catch((function(e){console.log(e)}))}catch(s){m("Fail to craete an account")}k(!1);case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(n.useEffect)((function(){p()({method:"post",url:e+"/auth/validateEmail",data:{email:F}}).then((function(e){null===e.data.data?I("email valid"):e.data.data&&I("email already registered")}))}),[F]),Object(l.jsx)(h.d,{className:"singup_boader",children:Object(l.jsx)(h.i,{children:Object(l.jsx)(h.c,{md:"6",children:Object(l.jsxs)("form",{noValidate:!0,onSubmit:function(e){e.preventDefault(),function(){R.apply(this,arguments)}()},children:[Object(l.jsx)("h1",{className:"h1 text-center mb-4",children:"Sign up"}),i&&Object(l.jsx)(O.a,{variant:"danger",children:i}),v&&Object(l.jsx)(O.a,{variant:"success",children:v}),Object(l.jsxs)("div",{className:"grey-text",children:[Object(l.jsx)(h.f,{label:"Type your name",icon:"user",type:"text",ref:t,validate:!0}),Object(l.jsxs)("div",{children:[Object(l.jsx)(h.f,{label:"Type your email",icon:"envelope",type:"email",ref:c,onChange:function(e){return C(e.target.value)}}),Object(l.jsx)("span",{class:"text-primary",children:P})]}),Object(l.jsx)(h.f,{label:"Type your password",icon:"lock",type:"password",ref:a,validate:!0}),Object(l.jsx)(h.f,{label:"Type your RE-password",icon:"lock",type:"password",ref:r,validate:!0}),Object(l.jsx)("br",{}),Object(l.jsx)(h.k,Object(u.a)({className:"text-muted"},"className","float-right")),Object(l.jsx)("br",{})]}),Object(l.jsxs)("div",{className:"text-center",children:[Object(l.jsx)(h.b,{disabled:N,type:"submit",children:"Sign up"}),Object(l.jsxs)("p",{children:["Alerady Have an account? ",Object(l.jsx)(x.b,{to:"./Login",children:"Log In"})," "]})]})]})})})})}),g=c(19);p.a.defaults.withCredentials=!0;var v=a.a.createContext(),y=a.a.createContext(),w=function(){return Object(n.useContext)(v)},S=function(){return Object(n.useContext)(y)};function N(e){var t=e.children,c=Object(n.useState)({user:null,loginStatus:!1,role:null}),a=Object(b.a)(c,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){p()({method:"get",url:"http://localhost:3001/getProfile"}).then((function(e){s((function(t){return Object(g.a)(Object(g.a)({},t),{},{loginStatus:!0,user:e.data.profile,role:e.data.profile.role})}))})).catch((function(e){return s((function(e){return Object(g.a)(Object(g.a)({},e),{},{role:"loggedout"})})),console.log(e,"loggedout err")}))}),[]),Object(l.jsx)(v.Provider,{value:r,children:Object(l.jsx)(y.Provider,{value:s,children:t})})}p.a.defaults.withCredentials=!0;var k=function(){w();var e=S();return Object(l.jsx)(h.d,{className:"singup_boader",children:Object(l.jsx)(h.i,{children:Object(l.jsx)(h.c,{md:"6",children:Object(l.jsxs)("form",{onSubmit:function(t){t.preventDefault(),p()({method:"post",url:"/auth/Login",data:{email:document.getElementById("email").value,password:document.getElementById("password").value}}).then((function(t){console.log("response.data: ",t.data),200===t.status?(e((function(e){return Object(g.a)(Object(g.a)({},e),{},{user:t.data.user,role:t.data.user.role})})),alert(t.data.message,"success"),console.log("if,succ")):(console.log(t.data.message,"ELSW,succ"),alert(t.data.message,"else"))})).catch((function(e){console.log(e,"error email")}))},className:"formcenter",children:[Object(l.jsx)("p",{className:"h4 text-center mb-4",children:"Sign in"}),Object(l.jsx)("label",{htmlFor:"defaultFormLoginEmailEx",className:"grey-text",children:"Your email"}),Object(l.jsx)("input",{type:"email",id:"email",className:"form-control",placeholder:"Enter Your Email"}),Object(l.jsx)("br",{}),Object(l.jsx)("label",{htmlFor:"defaultFormLoginPasswordEx",className:"grey-text",children:"Your password"}),Object(l.jsx)("input",{type:"password",id:"password",className:"form-control",placeholder:"Enter Your Password"}),Object(l.jsx)("div",{className:"text-center mt-4",children:Object(l.jsx)(h.b,{color:"unique",type:"submit",children:"Login"})})]})})})})};function L(){return Object(l.jsx)("div",{children:Object(l.jsx)("h1",{children:"User Dashboard"})})}function E(){return Object(l.jsx)("div",{children:Object(l.jsx)("h1",{children:"Admin Dashboard"})})}var F=c(8),C=c(211);var V=function(){var e=S();return Object(l.jsx)(C.a,{variant:"danger",onClick:function(){p()({method:"post",url:"http://localhost:3001/auth/logout"}).then((function(t){200===t.status&&(alert(t.data.message),e((function(e){return Object(g.a)(Object(g.a)({},e),{},{loginStatus:!1,role:"loggedout",user:null})})))}),(function(e){console.log(e.message)}))},children:"Logout"})},D=c(213),P=c(212);var I=function(){var e=w();return console.log("globalState: ",e),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("nav",{children:Object(l.jsxs)(D.a,{bg:"dark",variant:"dark",children:["admin"===e.role?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(P.a,{className:"mr-auto",children:Object(l.jsx)(P.a.Link,{children:Object(l.jsx)(x.b,{to:"/",children:"Admin Dashboard"})})}),Object(l.jsx)(V,{})]}):null,"user"===e.role?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(P.a,{className:"mr-auto",children:Object(l.jsx)(P.a.Link,{children:Object(l.jsx)(x.b,{to:"/",children:"user Dashboard"})})}),Object(l.jsx)(V,{})]}):null,"loggedout"===e.role?Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)(P.a,{className:"mr-auto",children:[Object(l.jsx)(P.a.Link,{children:Object(l.jsx)(x.b,{to:"/signup",children:"Signup"})}),Object(l.jsx)(P.a.Link,{children:Object(l.jsx)(x.b,{to:"/",children:"Home"})}),Object(l.jsx)(P.a.Link,{children:Object(l.jsx)(x.b,{to:"/login",children:"Login"})})]})}):null]})}),null===e.role?Object(l.jsx)(F.d,{children:Object(l.jsx)(F.b,{path:"*",children:Object(l.jsx)("h1",{children:"LOADING......"})})}):null,"loggedout"===e.role?Object(l.jsxs)(F.d,{children:[Object(l.jsx)(F.b,{exact:!0,path:"/",children:Object(l.jsx)(o,{})}),Object(l.jsx)(F.b,{path:"/signup",children:Object(l.jsx)(f,{})}),Object(l.jsx)(F.b,{path:"/login",children:Object(l.jsx)(k,{})}),Object(l.jsx)(F.b,{path:"*",children:Object(l.jsx)(F.a,{to:"/"})})]}):null,"user"===e.role?Object(l.jsxs)(F.d,{children:[Object(l.jsx)(F.b,{exact:!0,path:"/",children:Object(l.jsx)(L,{})}),Object(l.jsx)(F.b,{path:"*",children:Object(l.jsx)(F.a,{to:"/"})})]}):null,"admin"===e.role?Object(l.jsxs)(F.d,{children:[Object(l.jsx)(F.b,{exact:!0,path:"/",children:Object(l.jsx)(E,{})}),Object(l.jsx)(F.b,{path:"*",children:Object(l.jsx)(F.a,{to:"/"})})]}):null]})};s.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(x.a,{children:Object(l.jsx)(N,{children:Object(l.jsx)(I,{})})})}),document.getElementById("root"))}},[[206,1,2]]]);
//# sourceMappingURL=main.5aab4024.chunk.js.map