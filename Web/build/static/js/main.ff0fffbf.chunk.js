(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{101:function(e,t,n){},102:function(e,t,n){},167:function(e,t){},168:function(e,t){},176:function(e,t){},178:function(e,t){},215:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(18),s=n.n(r),l=(n(101),n(13)),o=(n(102),n(3));var i=function(){return Object(o.jsx)("div",{children:Object(o.jsx)("h1",{children:"Home"})})},j=n(64),u=n.n(j),d=n(49),b=n(91),h=n(24),O=n(12),x=n(223),m=n(11),p=n(15),f=n.n(p),g=(n(134),window.location.href.split(":")),v=g="https"===g[0]?"https://boilerplates-login-sign-mern.herokuapp.com":"http://localhost:3001",y=function(){var e=Object(c.useRef)(),t=Object(c.useRef)(),n=Object(c.useRef)(),a=Object(c.useRef)(),r=Object(c.useState)(""),s=Object(h.a)(r,2),l=s[0],i=s[1],j=Object(c.useState)(""),p=Object(h.a)(j,2),g=p[0],y=p[1],w=Object(c.useState)(!1),S=Object(h.a)(w,2),N=S[0],k=S[1],E=Object(c.useState)(""),L=Object(h.a)(E,2),C=L[0],F=L[1],V=Object(c.useState)(""),D=Object(h.a)(V,2),P=D[0],A=D[1];function I(){return(I=Object(b.a)(u.a.mark((function c(){return u.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(console.log(t.current.state.innerValue),""!==t.current.state.innerValue){c.next=5;break}return c.abrupt("return",i("email not found"));case 5:if(n.current.state.innerValue===a.current.state.innerValue){c.next=7;break}return c.abrupt("return",i("Password do not match"));case 7:try{y("Sign up succes full"),k(!0),f()({method:"post",url:v+"/auth/signup",data:{name:e.current.state.innerValue,email:t.current.state.innerValue,password:n.current.state.innerValue}}).then((function(e){e.data.status,alert(e.data.message)})).catch((function(e){console.log(e)}))}catch(r){i("Fail to craete an account")}k(!1);case 9:case"end":return c.stop()}}),c)})))).apply(this,arguments)}return Object(c.useEffect)((function(){f()({method:"post",url:v+"/auth/validateEmail",data:{email:C}}).then((function(e){null===e.data.data?A("email valid"):e.data.data&&A("email already registered")}))}),[C]),Object(o.jsx)(O.d,{className:"singup_boader",children:Object(o.jsx)(O.i,{children:Object(o.jsx)(O.c,{md:"6",children:Object(o.jsxs)("form",{noValidate:!0,onSubmit:function(e){e.preventDefault(),function(){I.apply(this,arguments)}()},children:[Object(o.jsx)("h1",{className:"h1 text-center mb-4",children:"Sign up"}),l&&Object(o.jsx)(x.a,{variant:"danger",children:l}),g&&Object(o.jsx)(x.a,{variant:"success",children:g}),Object(o.jsxs)("div",{className:"grey-text",children:[Object(o.jsx)(O.f,{label:"Type your name",icon:"user",type:"text",ref:e,validate:!0}),Object(o.jsxs)("div",{children:[Object(o.jsx)(O.f,{label:"Type your email",icon:"envelope",type:"email",ref:t,onChange:function(e){return F(e.target.value)}}),Object(o.jsx)("span",{class:"text-primary",children:P})]}),Object(o.jsx)(O.f,{label:"Type your password",icon:"lock",type:"password",ref:n,validate:!0}),Object(o.jsx)(O.f,{label:"Type your RE-password",icon:"lock",type:"password",ref:a,validate:!0}),Object(o.jsx)("br",{}),Object(o.jsx)(O.k,Object(d.a)({className:"text-muted"},"className","float-right")),Object(o.jsx)("br",{})]}),Object(o.jsxs)("div",{className:"text-center",children:[Object(o.jsx)(O.b,{disabled:N,type:"submit",children:"Sign up"}),Object(o.jsxs)("p",{children:["Alerady Have an account? ",Object(o.jsx)(m.b,{to:"./Login",children:"Log In"})," "]})]})]})})})})};f.a.defaults.withCredentials=!0;var w=a.a.createContext(),S=a.a.createContext(),N=function(){return Object(c.useContext)(w)},k=function(){return Object(c.useContext)(S)};function E(e){var t=e.children,n=Object(c.useState)({user:null,loginStatus:!1,role:null}),a=Object(h.a)(n,2),r=a[0],s=a[1];return Object(c.useEffect)((function(){f()({method:"get",url:v+"/getProfile"}).then((function(e){s((function(t){return Object(l.a)(Object(l.a)({},t),{},{loginStatus:!0,user:e.data.profile,role:e.data.profile.role})}))})).catch((function(e){return s((function(e){return Object(l.a)(Object(l.a)({},e),{},{role:"loggedout"})})),console.log(e,"loggedout err")}))}),[]),Object(o.jsx)(w.Provider,{value:r,children:Object(o.jsx)(S.Provider,{value:s,children:t})})}f.a.defaults.withCredentials=!0;var L=function(){N();var e=k();return Object(o.jsx)(O.d,{className:"singup_boader",children:Object(o.jsx)(O.i,{children:Object(o.jsx)(O.c,{md:"6",children:Object(o.jsxs)("form",{onSubmit:function(t){t.preventDefault(),f()({method:"post",url:v+"/auth/Login",data:{email:document.getElementById("email").value,password:document.getElementById("password").value}}).then((function(t){console.log("response.data: ",t.data),200===t.status?(e((function(e){return Object(l.a)(Object(l.a)({},e),{},{user:t.data.user,role:t.data.user.role})})),alert(t.data.message,"success"),console.log("if,succ")):(console.log(t.data.message,"ELSW,succ"),alert(t.data.message,"else"))})).catch((function(e){console.log(e,"error email")}))},className:"formcenter",children:[Object(o.jsx)("p",{className:"h4 text-center mb-4",children:"Sign in"}),Object(o.jsx)("label",{htmlFor:"defaultFormLoginEmailEx",className:"grey-text",children:"Your email"}),Object(o.jsx)("input",{type:"email",id:"email",className:"form-control",placeholder:"Enter Your Email"}),Object(o.jsx)("br",{}),Object(o.jsx)("label",{htmlFor:"defaultFormLoginPasswordEx",className:"grey-text",children:"Your password"}),Object(o.jsx)("input",{type:"password",id:"password",className:"form-control",placeholder:"Enter Your Password"}),Object(o.jsx)("div",{className:"text-center mt-4",children:Object(o.jsx)(O.b,{color:"unique",type:"submit",children:"Login"})})]})})})})};function C(){return Object(o.jsx)("div",{children:Object(o.jsx)("h1",{children:"User Dashboard"})})}function F(){return Object(o.jsx)("div",{children:Object(o.jsx)("h1",{children:"Admin Dashboard"})})}var V=n(8),D=n(220);var P=function(){var e=k();return Object(o.jsx)(D.a,{variant:"danger",onClick:function(){f()({method:"post",url:v+"/auth/logout"}).then((function(t){200===t.status&&(alert(t.data.message),e((function(e){return Object(l.a)(Object(l.a)({},e),{},{loginStatus:!1,role:"loggedout",user:null})})))}),(function(e){console.log(e.message)}))},children:"Logout"})},A=n(222),I=n(221);var R=function(){var e=N();console.log("globalState: ",e);var t=k();return Object(c.useEffect)((function(){f()({method:"get",url:v+"/getProfile",withCredentials:!0}).then((function(e){console.log("response.dataAppJs: ",e.data),console.log("response.dataAppJs: ",e.data.profile,e.data.profile.role),t((function(t){return Object(l.a)(Object(l.a)({},t),{},{user:e.data.profile,role:e.data.profile.role})}))})).catch((function(e){console.log(e,"error email")}))}),[]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("nav",{children:Object(o.jsxs)(A.a,{bg:"dark",variant:"dark",children:["admin"===e.role?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(I.a,{className:"mr-auto",children:Object(o.jsx)(I.a.Link,{children:Object(o.jsx)(m.b,{to:"/",children:"Admin Dashboard"})})}),Object(o.jsx)(P,{})]}):null,"user"===e.role?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(I.a,{className:"mr-auto",children:Object(o.jsx)(I.a.Link,{children:Object(o.jsx)(m.b,{to:"/",children:"user Dashboard"})})}),Object(o.jsx)(P,{})]}):null,"loggedout"===e.role?Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(I.a,{className:"mr-auto",children:[Object(o.jsx)(I.a.Link,{children:Object(o.jsx)(m.b,{to:"/signup",children:"Signup"})}),Object(o.jsx)(I.a.Link,{children:Object(o.jsx)(m.b,{to:"/",children:"Home"})}),Object(o.jsx)(I.a.Link,{children:Object(o.jsx)(m.b,{to:"/login",children:"Login"})})]})}):null]})}),null===e.role?Object(o.jsx)(V.d,{children:Object(o.jsx)(V.b,{path:"*",children:Object(o.jsx)("h1",{children:"LOADING......"})})}):null,"loggedout"===e.role?Object(o.jsxs)(V.d,{children:[Object(o.jsx)(V.b,{exact:!0,path:"/",children:Object(o.jsx)(i,{})}),Object(o.jsx)(V.b,{path:"/signup",children:Object(o.jsx)(y,{})}),Object(o.jsx)(V.b,{path:"/login",children:Object(o.jsx)(L,{})}),Object(o.jsx)(V.b,{path:"*",children:Object(o.jsx)(V.a,{to:"/"})})]}):null,"user"===e.role?Object(o.jsxs)(V.d,{children:[Object(o.jsx)(V.b,{exact:!0,path:"/",children:Object(o.jsx)(C,{})}),Object(o.jsx)(V.b,{path:"*",children:Object(o.jsx)(V.a,{to:"/"})})]}):null,"admin"===e.role?Object(o.jsxs)(V.d,{children:[Object(o.jsx)(V.b,{exact:!0,path:"/",children:Object(o.jsx)(F,{})}),Object(o.jsx)(V.b,{path:"*",children:Object(o.jsx)(V.a,{to:"/"})})]}):null]})};s.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(m.a,{children:Object(o.jsx)(E,{children:Object(o.jsx)(R,{})})})}),document.getElementById("root"))}},[[215,1,2]]]);
//# sourceMappingURL=main.ff0fffbf.chunk.js.map